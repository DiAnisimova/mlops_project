### Системная конфигурация

При проведении замеров использовалась следующая системная конфигурация:

- операционная система: Ubuntu 22.04.3 LTS
- модель CPU: Intel(R) Core(TM) i7-1065G7 CPU @ 1.30GHz
- параметры, при которых собирались метрики:
  - CPU: 4
  - RAM: 256 Мб

### Решаемая задача

Решалась задача прогнозирования цены на недвижимость при помощи
CatBoostRegressor. Исходные данные были взяты с
[Kaggle](https://www.kaggle.com/datasets/harlfoxem/housesalesprediction).

### Структура model_repository:

.\
└── catboost_onnx\
 ├── 1\
 │   └── model.onnx\
 └── config.pbtxt\

### Эксперименты с оптимизациями

Сначала подбирался dynamic_batching, при этом число сущностей было равно 1. Во
всех экспериментах число запросов было равно 8.

##### dynamic_batching

|  №  | microseconds | avg.latency | latency std | throughput |
| :-: | :----------: | :---------: | :---------: | :--------: |
|  1  |      0       |     830     |    1269     |  9617.17   |
|  2  |     100      |     788     |     813     |  10134.5   |
|  3  |     200      |     865     |     558     |  9232.06   |
|  4  |     300      |     633     |     163     |  12598.5   |
|  5  |     400      |     664     |     285     |  12014.6   |
|  6  |     500      |     575     |     66      |  13863.3   |
|  7  |     1000     |     620     |     161     |  12860.4   |
|  8  |     1500     |     582     |     62      |  13705.2   |
|  9  |     2000     |     561     |     63      |   14213    |
| 10  |     5000     |     585     |     69      |  13640.6   |

Видно, что начиная с 500 микросекунд метрики перестают улучшаться, они лишь
колеблются около оптимального значения. Поэтому была выбрана именно такая
задержка.

##### instance_group

Здесь значение параметра count подбиралось с уже настроенным dynamic_batching.

|  №  | count | avg.latency | latency std | throughput |
| :-: | :---: | :---------: | :---------: | :--------: |
|  1  |   1   |     575     |     66      |  13863.3   |
|  2  |   2   |    6039     |    9819     |  1324.11   |
|  3  |   3   |     668     |     265     |  11953.4   |
|  4  |   4   |    8118     |    11656    |  984.951   |
|  5  |   5   |     705     |     99      |  11325.2   |
|  6  |   6   |    7819     |    11504    |  1022.51   |
|  7  |   7   |    7547     |    11202    |  1059.39   |

Видно, что значения метрик очень сильно скачут, при этом с увеличением параметра
count лучше они не становятся. Поэтому остановимся на count=1.
